{% extends "base.html" %}
{% load humanize %}

{% block title %}Products - My Site{% endblock %}

{% block content %}
<section class="products-page">
  <div class="container">
    <div class="products-header">
      <h1>Our Products</h1>
      <p class="products-count">{{ mahsulotlar|length }} products available</p>
    </div>

    {% if mahsulotlar %}
    <div class="product-grid">
      {% for product in mahsulotlar %}
      <article class="product-card">
        <div class="product-card-image">
          {% if product.primary_image %}
            <img src="{{ product.primary_image.image.url }}" alt="{{ product.name }}">
          {% else %}
            <span class="no-image">No image</span>
          {% endif %}
        </div>
        <div class="product-card-body">
          {% if product.category %}
            <span class="product-card-category">{{ product.category.name }}</span>
          {% endif %}
          <h3 class="product-card-title">
            <a href="{% url 'products:product_detail' product.slug %}">{{ product.name }}</a>
          </h3>
          <p class="product-card-description">{{ product.description|truncatewords:15 }}</p>
          <div class="product-card-footer">
            <div class="product-card-price">
              {{ product.price|intcomma }}<span class="currency">UZS</span>
            </div>
            <a href="{% url 'products:product_detail' product.slug %}" class="product-card-action">
              View Details
            </a>
          </div>
        </div>
      </article>
      {% endfor %}
    </div>
    {% else %}
    <div class="products-empty">
      <div class="products-empty-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="40" height="40">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
        </svg>
      </div>
      <h3>No Products Available</h3>
      <p>Check back later for new arrivals!</p>
    </div>
    {% endif %}
  </div>
</section>
{% endblock %}